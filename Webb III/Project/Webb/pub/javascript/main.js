"use strict";var __awaiter=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,s){function l(e){try{o(i.next(e))}catch(e){s(e)}}function d(e){try{o(i.throw(e))}catch(e){s(e)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}o((i=i.apply(e,t||[])).next())}))};let header_left=document.getElementById("header_left"),emailInput=document.getElementById("email"),passwordInput=document.getElementById("password"),submitBtn=document.getElementById("submitBtn"),loginTest=document.getElementById("login_test"),signInMessage=document.getElementById("signInMessage"),emailPassword=document.getElementById("emailPassword"),passwordPassword=document.getElementById("passwordPassword"),passwordForm=document.getElementById("passwordForm"),passwordMessage=document.getElementById("passwordMessage"),signInUser=e=>__awaiter(void 0,void 0,void 0,(function*(){e.preventDefault();let t=passwordInput.value,n=emailInput.value;fetch(apiLinkSignIn+"?email="+n+"&password="+t).then((e=>{e.ok?e.json().then((e=>{e.forEach((e=>{sessionStorage.setItem("name",e.firstname),sessionStorage.setItem("id",e.userID),sessionStorage.setItem("signIn","true"),location.replace("/admin/index.html")}))})):e.ok?(signInMessage.innerHTML="Kontakta administratören",signInMessage.classList.add("error")):e.json().then((e=>{let t=JSON.stringify(e),n=JSON.parse(t);signInMessage.innerHTML=n.message,signInMessage.classList.add("error")}))}))})),changePassword=e=>{e.preventDefault();let t={password:passwordPassword.value,email:emailPassword.value},n=apiLinkSignIn,i=JSON.stringify(t);callFetch(n,"PUT",i,passwordMessage,"password")},checkAdmin=()=>{"true"==sessionStorage.getItem("signIn")&&"false"!=sessionStorage.getItem("signIn")&&null!==sessionStorage.getItem("signIn")||location.replace("login.html")},signOut=()=>{sessionStorage.clear(),location.replace("login.html")},apiLinkEducation="https://emiria.se/admin/API/rest/rest.education.php",apiLinkEducationWithID="https://emiria.se/admin/API/rest/rest.education.php?educationID=",apiLinkTexts="https://emiria.se/admin/API/rest/rest.texts.php",apiLinkTextsWithID="https://emiria.se/admin/API/rest/rest.texts.php?textID=",apiLinkWork="https://emiria.se/admin/API/rest/rest.work.php",apiLinkIDWork="https://emiria.se/admin/API/rest/rest.work.php?workID=",apiLinkWebbpages="https://emiria.se/admin/API/rest/rest.webbpages.php",apiLinkWebbpagesWithID="https://emiria.se/admin/API/rest/rest.webbpages.php?webbpageID=",apiLinkSignIn="https://emiria.se/admin/API/rest/rest.user.php",menuBtn=document.getElementById("menuBtn"),menuList=document.getElementById("menuList");menuBtn.addEventListener("click",(()=>{"none"===menuList.style.display?(menuList.style.display="block",menuList.style.transition="0.2s"):(menuList.style.display="none",menuList.style.transition="0.2s")}));const screenSize=window.matchMedia("(max-width: 800px), (max-height:550px)");let loadMenu=()=>{screenSize.matches?(menuBtn.style.display="block",menuList.style.display="none"):(menuBtn.style.display="none",menuList.style.display="block")};if(loadMenu(),screenSize.addListener(loadMenu),"true"==sessionStorage.getItem("signIn")){let e=document.createElement("LI");e.innerHTML='<a href="/admin">Admin</a>',menuList.prepend(e)}let iii,btn=document.getElementsByClassName("admin_collapsibleBtn");for(iii=0;iii<btn.length;iii++)btn[iii].addEventListener("click",(function(){this.classList.toggle("collUp");let e=this.nextElementSibling;"block"===e.style.display?e.style.display="none":e.style.display="block"}));let eduForm=document.getElementById("eduForm"),titleEdu=document.getElementById("titleEdu"),school=document.getElementById("school"),semester=document.getElementById("semester"),dateEdu=document.getElementById("dateEdu"),statusEdu=document.getElementById("statusEdu"),commentEdu=document.getElementById("commentEdu"),editEduBtn=document.getElementById("editEduBtn"),deleteEduBtn=document.getElementById("deleteEduBtn"),addEduBtn=document.getElementById("addEduBtn"),educationMessage=document.getElementById("educationMessage"),eduListAdmin=document.getElementById("eduListAdmin");null!=editEduBtn&&(editEduBtn.style.display="none",deleteEduBtn.style.display="none",addEduBtn.style.display="none",eduForm.style.display="none");let getEducationListAdmin=()=>{fetch(apiLinkEducation).then((e=>e.json())).then((e=>{e.forEach((e=>{eduListAdmin.innerHTML+=`\n                    <li onclick="changeEducationInfo('${e.educationID}')"> ${e.title} </li>\n                `}))}))},changeEducationInfo=e=>{fetch(apiLinkEducationWithID+e).then((e=>e.json())).then((t=>{t.forEach((t=>{clearInputs("education"),titleEdu.value=t.title,school.value=t.school,semester.value=t.semester,dateEdu.value=t.date,statusEdu.value=t.status,commentEdu.value=t.comment,editEduBtn.setAttribute("onclick","editEducation("+e+");"),deleteEduBtn.setAttribute("onclick","deleteEducation("+e+");"),editEduBtn.style.display="block",deleteEduBtn.style.display="block",eduForm.style.display="block",addEduBtn.style.display="none",clearAllMessages("education")}))}))},editEducation=e=>{event.preventDefault();let t={educationID:e,title:titleEdu.value,school:school.value,semester:semester.value,date:dateEdu.value,status:statusEdu.value,comment:commentEdu.value},n=apiLinkEducationWithID+e,i=JSON.stringify(t);callFetch(n,"PUT",i,educationMessage,"education")},deleteEducation=e=>{event.preventDefault();let t={title:titleEdu.value,educationID:e};if(1==confirm("Är du säker på att du vill radera kursen?")){let n=apiLinkEducationWithID+e,i="DELETE",a=JSON.stringify(t);callFetch(n,i,a,educationMessage,"education")}},prepareToAddEducation=()=>{editEduBtn.style.display="none",deleteEduBtn.style.display="none",addEduBtn.style.display="block",eduForm.style.display="block",clearInputs("education"),addEduBtn.setAttribute("onclick","addEducation();"),clearAllMessages("education")},addEducation=()=>{event.preventDefault();let e={title:titleEdu.value,school:school.value,semester:semester.value,date:dateEdu.value,status:statusEdu.value,comment:commentEdu.value},t=apiLinkEducation,n=JSON.stringify(e);callFetch(t,"POST",n,educationMessage,"education")},updateListAdmin=e=>{if("work"==e){for(;workListAdmin.firstChild;)workListAdmin.removeChild(workListAdmin.firstChild);getWorkListAdmin(),clearInputs(e)}else if("education"==e){for(;eduListAdmin.firstChild;)eduListAdmin.removeChild(eduListAdmin.firstChild);getEducationListAdmin(),clearInputs(e)}else if("webbpage"==e){for(;webbpageList.firstChild;)webbpageList.removeChild(webbpageList.firstChild);getWebbpageListAdmin(),clearInputs(e)}else if("text"==e){for(;adminListsText.firstChild;)adminListsText.removeChild(adminListsText.firstChild);getTextListAdmin(),clearInputs(e)}},clearInputs=e=>{"work"==e?(titleWork.value="",workplace.value="",dateWork.value="",commentWork.value=""):"education"==e?(titleEdu.value="",school.value="",semester.value="",dateEdu.value="",statusEdu.value="",commentEdu.value=""):"webbpage"==e?(titleWebbpage.value="",linkWebbpage.value="",descriptionWebbpage.value="",imageWebbpage.value="",webbpageLinkLink.setAttribute("href",""),webbpageLinkLink.innerHTML="",webbpageImage.innerHTML=""):"text"==e&&(textTextarea.value="",textTitle.value="",textImage.value="",textImgDiv.innerHTML="")},clearAllMessages=e=>{setTimeout((()=>{"work"==e?(workMessage.innerHTML="",workMessage.removeAttribute("class")):"education"==e?(educationMessage.innerHTML="",educationMessage.removeAttribute("class")):"text"==e?(textMessage.innerHTML="",textMessage.removeAttribute("class")):"webbpage"==e?(webbpageMessage.innerHTML="",webbpageMessage.removeAttribute("class")):"signIn"==e?(signInMessage.innerHTML="",signInMessage.removeAttribute("class")):"password"==e&&(passwordMessage.innerHTML="",passwordMessage.removeAttribute("class"))}),6e3)},portfolioDiv=document.getElementById("portfolioDiv"),workList=document.getElementById("workList"),courseListTable=document.getElementById("courseListTable"),oldCourseList=document.getElementById("courseOldListTable"),indexEl=document.getElementById("indexText"),aboutText=document.getElementById("aboutText"),aboutImg=document.getElementById("aboutImg"),aboutTitle=document.getElementById("aboutTitle"),cMobile=document.getElementById("contact_mobile"),cMail=document.getElementById("contact_mail"),cGithub=document.getElementById("contact_github"),getWorkFrontPage=()=>{fetch(apiLinkWork).then((e=>e.json())).then((e=>{e.forEach((e=>{null!=workList&&(workList.innerHTML+=`\n                        <section class="work_sectionDesign">\n                            <div> \n                                <h2>${e.title}</h2>\n                                <p> ${e.comment} </p>\n                                <p class="work_dateTime"> ${e.workplace} <br> ${e.date}</p>\n                            </div>\n                        </section>\n                    `)}))}))},getWebbpages=()=>{fetch(apiLinkWebbpages).then((e=>e.json())).then((e=>{e.forEach((e=>{null==e.imgPath||"empty"==e.imgPath?portfolioDiv.innerHTML+=`\n                        <h2>${e.title}</h2>\n                        <div class="portfolioFlex"> \n                            <div>\n                                <p> ${e.description} </p>\n                                <p> Kika på webbplatsen här: <a href="${e.link}" target="_blank"> webblänk till ${e.title} </a> </p>\n                            </div>\n\n                            <div>\n                                <img src="../images/missing.png" style="border: 2px solid #ddd;" alt="">\n                            </div>\n                        </div>\n\n                    `:portfolioDiv.innerHTML+=`\n                    <h2>${e.title}</h2>\n                    <div class="portfolioFlex"> \n                        <div>\n                            <p> ${e.description} </p>\n                            <p> Kika på webbplatsen här: <a href="${e.link}" target="_blank"> webblänk till ${e.title} </a> </p>\n                        </div>\n\n                        <div>\n                            \n                            <a href="${e.link}" target="_blank" title="Till webbplatsen ${e.title}" ><img src="${e.imgPath}" alt=""></a>\n                        </div>\n                    </div>\n\n                    `}))}))},getTextsForIndex=()=>{fetch(apiLinkTexts).then((e=>e.json())).then((e=>{e.forEach((e=>{"Index"==e.title&&null!=indexEl&&(indexEl.innerHTML=e.theText),"About"==e.title&&null!=aboutText&&(aboutText.innerHTML=e.theText,aboutImg.innerHTML=`<img src="${e.imgPath}" alt=""/> `),"Mobile"==e.title&&null!=cMobile&&(cMobile.innerHTML=`<a href="tel:${e.theText}">${e.theText}</a>`),"Mail"==e.title&&null!=cMail&&(cMail.innerHTML=`<a href="mailto:${e.theText}">${e.theText}</a>`),"Github"==e.title&&null!=cGithub&&(cGithub.innerHTML=`<a href="https://github.com/${e.theText}">${e.theText}</a>`)}))}))},getTextsEducation=()=>{fetch(apiLinkTextsWithID+3).then((e=>e.json())).then((e=>{e.forEach((e=>{null!=educationEl&&(educationEl.innerHTML+=`\n                    <p> ${e.theText} </p>\n                `)}))}))},getEducationList=()=>{fetch(apiLinkEducation).then((e=>e.json())).then((e=>{e.forEach((e=>{if(null!=courseListTable&&"Mittuniversitetet"==e.school&&0==e.status){let t="Pågående";courseListTable.innerHTML+=` \n                    <tr> \n                        <td> ${e.title} </td>\n                        <td> ${e.comment} </td>\n                        <td> ${e.semester} ${e.date} </td>\n                        <td> ${t} </td>\n                    </tr>\n                    `}else if(null!=courseListTable&&"Mittuniversitetet"==e.school&&1==e.status){let t="Avslutad";courseListTable.innerHTML+=` \n                        <tr> \n                            <td> ${e.title} </td>\n                            <td> ${e.comment} </td>\n                            <td> ${e.semester} ${e.date} </td>\n                            <td> ${t} </td>\n                        </tr>\n                        `}null!=oldCourseList&&"Mittuniversitetet"!=e.school&&(oldCourseList.innerHTML+=` \n                    <tr> \n                        <td> ${e.title} </td>\n                        <td> ${e.comment} </td>\n                        <td> ${e.semester} ${e.date} </td>\n                    </tr>\n                    `)}))}))},educationEl=document.getElementById("educationText"),textMessage=document.getElementById("textMessage"),adminTextSubmit=document.getElementById("adminTextSubmit"),adminListsText=document.getElementById("adminListsText"),textTextarea=document.getElementById("textTextarea"),textFrom=document.getElementById("textFrom"),textImage=document.getElementById("textImage"),textTitle=document.getElementById("textTitle"),textImgDiv=document.getElementById("textFrom_imgDiv"),getTextListAdmin=()=>{textFrom.style.display="none",fetch(apiLinkTexts).then((e=>e.json())).then((e=>{e.forEach((e=>{adminListsText.innerHTML+=`\n                <li onclick="changeTexts('${e.textID}')"> \n                    ${e.title} \n                </li>\n            `}))}))},changeTexts=e=>{textFrom.style.display="block",fetch(apiLinkTextsWithID+e).then((e=>e.json())).then((t=>{t.forEach((t=>{if(null!=textTextarea){if(textTitle.value=t.title,textTextarea.innerHTML=t.theText,"empty"!=t.imgPath){document.createElement("img").src=t.imgPath,textImgDiv.innerHTML=` \n                            <p> Nuvarande bild: </p>\n                            <img src="${t.imgPath}" alt=""/>\n                        `}else textImgDiv.innerHTML="";adminTextSubmit.setAttribute("onclick","editTextAdmin('"+e+"');")}}))}))},editTextAdmin=e=>{event.preventDefault();let t=textTitle.value,n=textTextarea.value,i=textImage.files[0],a={title:t,theText:n};if(null==textImage.files[0]){let t=apiLinkTextsWithID+e,n="PUT",i=JSON.stringify(a);callFetch(t,n,i,textMessage,"text")}else{let a=new FormData;a.append("image",i),a.append("theText",n),a.append("textID",e),a.append("title",t),callFetch(apiLinkTexts,"POST",a,textMessage,"text")}},webbpageList=document.getElementById("webbpageList"),webbpageMessage=document.getElementById("webbpageMessage"),webbpageForm=document.getElementById("webbpageForm"),titleWebbpage=document.getElementById("titleWebbpage"),linkWebbpage=document.getElementById("linkWebbpage"),descriptionWebbpage=document.getElementById("descriptionWebbpage"),imageWebbpage=document.getElementById("imageWebbpage"),webbpageLinkLink=document.getElementById("webbpageLinkLink"),webbpageImage=document.getElementById("webbpageFrom_imgDiv"),editWebbpageBtn=document.getElementById("editWebbpageBtn"),deleteWebbpageBtn=document.getElementById("deleteWebbpageBtn"),addWebbpageBtn=document.getElementById("addWebbpageBtn");null!=editWebbpageBtn&&(editWebbpageBtn.style.display="none",deleteWebbpageBtn.style.display="none",addWebbpageBtn.style.display="none",webbpageForm.style.display="none");let getWebbpageListAdmin=()=>{fetch(apiLinkWebbpages).then((e=>{e.ok?e.json().then((e=>{e.forEach((e=>{webbpageList.innerHTML+=`\n                        <li onclick="changeWebbpageInfo('${e.webbpageID}')"> ${e.title} </li>\n                    `}))})):e.ok?(webbpageMessage.innerHTML="Något gått snett, kolla koden",webbpageMessage.classList.add("message")):e.json().then((e=>{let t=JSON.stringify(e),n=JSON.parse(t);webbpageMessage.innerHTML=n.message,webbpageMessage.classList.add("error")}))}))},changeWebbpageInfo=e=>{fetch(apiLinkWebbpagesWithID+e).then((e=>e.json())).then((t=>{t.forEach((t=>{clearInputs("webbpage"),titleWebbpage.value=t.title,linkWebbpage.value=t.link,webbpageLinkLink.setAttribute("href",t.link),webbpageLinkLink.innerHTML=t.link,descriptionWebbpage.value=t.description,""==t.imgPath||null==t.imgPath||"empty"==t.imgPath?webbpageImage.innerHTML=' \n                            <img src="../images/missing.png" style="border: 2px solid #333;" alt=""> \n                        ':webbpageImage.innerHTML=`\n                            <p> Nuvarande bild: </p>\n                            <img src="${t.imgPath}" alt=""/>\n                        `,editWebbpageBtn.setAttribute("onclick","editWebbpage("+e+");"),deleteWebbpageBtn.setAttribute("onclick","deleteWebbpage("+e+");"),editWebbpageBtn.style.display="block",deleteWebbpageBtn.style.display="block",webbpageForm.style.display="block",addWebbpageBtn.style.display="none",clearAllMessages("webbpage")}))}))},deleteWebbpage=e=>{event.preventDefault();let t={title:titleWebbpage.value,webbpageID:e};if(1==confirm("Är du säker på att du vill radera webbsidan?")){let n=apiLinkWebbpagesWithID+e,i="DELETE",a=JSON.stringify(t);callFetch(n,i,a,webbpageMessage,"webbpage")}},editWebbpage=e=>{if(event.preventDefault(),null==imageWebbpage.files[0]){let t={webbpageID:e,title:titleWebbpage.value,link:linkWebbpage.value,description:descriptionWebbpage.value},n=apiLinkWebbpagesWithID+e,i="PUT",a=JSON.stringify(t);callFetch(n,i,a,webbpageMessage,"webbpage")}else{let t=titleWebbpage.value,n=linkWebbpage.value,i=descriptionWebbpage.value,a=imageWebbpage.files[0],s=new FormData;s.append("webbpageID",e),s.append("title",t),s.append("link",n),s.append("description",i),s.append("image",a),s.append("mission","edit"),callFetch(apiLinkWebbpagesWithID+e,"POST",s,webbpageMessage,"webbpage")}},prepareToAddWebbapge=()=>{editWebbpageBtn.style.display="none",deleteWebbpageBtn.style.display="none",addWebbpageBtn.style.display="block",webbpageForm.style.display="block",clearInputs("webbpage"),addWebbpageBtn.setAttribute("onclick","addWebbpage();"),clearAllMessages("webbpage")},addWebbpage=()=>{event.preventDefault();let e=titleWebbpage.value,t=linkWebbpage.value,n=descriptionWebbpage.value,i=imageWebbpage.files[0],a=new FormData;a.append("image",i),a.append("title",e),a.append("link",t),a.append("description",n),a.append("mission","add");callFetch(apiLinkWebbpages,"POST",a,webbpageMessage,"webbpage")},workForm=document.getElementById("workForm"),titleWork=document.getElementById("titleWork"),workplace=document.getElementById("workplace"),dateWork=document.getElementById("dateWork"),commentWork=document.getElementById("commentWork"),editWorkBtn=document.getElementById("editWorkBtn"),deleteWorkBtn=document.getElementById("deleteWorkBtn"),addWorkBtn=document.getElementById("addWorkBtn"),workMessage=document.getElementById("workMessage"),workListAdmin=document.getElementById("workListAdmin");null!=editWorkBtn&&(editWorkBtn.style.display="none",deleteWorkBtn.style.display="none",addWorkBtn.style.display="none",workForm.style.display="none");let getWorkListAdmin=()=>{fetch(apiLinkWork).then((e=>e.json())).then((e=>{e.forEach((e=>{null!=workListAdmin&&(workListAdmin.innerHTML+=`\n                    <li onclick="changeWorkInfo('${e.workID}')"> ${e.title} </li>\n                    `)}))}))},changeWorkInfo=e=>{fetch(apiLinkIDWork+e).then((e=>e.json())).then((t=>{t.forEach((t=>{clearInputs("work"),titleWork.value=t.title,workplace.value=t.workplace,dateWork.value=t.date,commentWork.value=t.comment,editWorkBtn.setAttribute("onclick","editWork("+e+");"),deleteWorkBtn.setAttribute("onclick","deleteWork("+e+");"),editWorkBtn.style.display="block",deleteWorkBtn.style.display="block",workForm.style.display="block",addWorkBtn.style.display="none",clearAllMessages("work")}))}))},editWork=e=>{event.preventDefault();let t={workID:e,title:titleWork.value,workplace:workplace.value,date:dateWork.value,comment:commentWork.value},n=apiLinkIDWork+e,i=JSON.stringify(t);callFetch(n,"PUT",i,workMessage,"work")},deleteWork=e=>{event.preventDefault();let t={title:titleWork.value,workID:e};if(1==confirm("Är du säker på att du vill radera erfarenheten?!")){let n=apiLinkIDWork+e,i="DELETE",a=JSON.stringify(t);callFetch(n,i,a,workMessage,"work")}},prepareToAddWork=()=>{editWorkBtn.style.display="none",deleteWorkBtn.style.display="none",addWorkBtn.style.display="block",workForm.style.display="block",clearInputs("work"),addWorkBtn.setAttribute("onclick","addWork();"),clearAllMessages("work")},addWork=()=>{event.preventDefault();let e={title:titleWork.value,workplace:workplace.value,date:dateWork.value,comment:commentWork.value},t=apiLinkWork,n=JSON.stringify(e);callFetch(t,"POST",n,workMessage,"work")},callFetch=(e,t,n,i,a)=>{fetch(e,{method:t,body:n}).then((e=>{e.json().then((t=>{let n=JSON.stringify(t),s=JSON.parse(n);e.ok?(i.innerHTML=s.message,i.classList.add("success"),updateListAdmin(a),clearAllMessages(a)):(i.innerHTML=s.message,i.classList.add("error"))}))}))};
//# sourceMappingURL=../sourcemap/main.js.map
